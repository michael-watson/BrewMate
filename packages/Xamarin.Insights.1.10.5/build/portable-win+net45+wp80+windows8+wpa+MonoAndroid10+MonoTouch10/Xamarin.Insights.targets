<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
	
	<Target Name="XamarinInsightsLicenceBuilder" 
		Outputs="InsightsGeneratedLicenceFile.cs"
		Condition="'$(XamarinInsightsApiKey)' != '' And '$(RootNamespace)' != ''"
		BeforeTargets="CoreCompile">

		<WriteLinesToFile
			File="$(IntermediateOutputPath)/InsightsGeneratedLicenceFile.cs"
			Lines="// This file is automatically generated by Xamarin.Insights - do not modify
namespace $(RootNamespace)
{
	class XamarinInsights
	{
		public const string ApiKey = &quot;$(XamarinInsightsApiKey)&quot;%3b
	}
}
"
			Overwrite="True"
		/>
		<ItemGroup>
			<Compile Include="$(IntermediateOutputPath)/InsightsGeneratedLicenceFile.cs" />
		</ItemGroup>
	</Target>
</Project>
